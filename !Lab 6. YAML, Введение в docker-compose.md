# YAML, Введение в docker-compose.md

YAML — это язык для хранения информации в формате понятном человеку. YAML обычно применяют для создания конфигурационных файлов в программах типа Инфраструктура как код (Iac), или для управления контейнерами в работе DevOps.
Чаще всего с помощью YAML создают протоколы автоматизации, которые могут выполнять последовательности команд записанные в YAML-файле. Это позволяет вашей системе быть более независимой и отзывчивой без дополнительного внимания разработчика.
Если вы не хотите, чтобы при синтаксическом разборе файла YAML повторялись ошибки, вы всегда должны помнить следующее при работе с YAML:G
При работе с YAML необходимо учитывать некоторые вещи:
 - Вкладки НЕ допускаются в YAML. Вы должны использовать отступы.
 - Хотя количество места не имеет значения, если отступ дочернего узла больше, чем отступ родительского узла, может возникнуть ошибка. Необходимо оставлять одинаковое количество пробелов.
 - Между различными элементами YAML должен быть пробел.
 - YAML чувствителен к регистру.
 - YAML-файл должен заканчиваться расширениями вроде .yaml или .yml.
 - YAML поддерживает кодировку UTF-8, UTF-16 и UTF-32.

## Основные конструкции YAML файла

Скаляры – это строки и числа, из которых состоят данные на странице. Проще говоря, это пары ключ-значение.
```sh
build: .
image: redis
```

Элементы или элементы списка и коллекции.
```sh
volumes:
   - .:/code
   - logvolume01:/var/log
```
### Словари(они же dictionaries, они же mappings) в YAML:
```sh
key1: "value1"
key2:
  - value2
  - value3
```

## Docker-compose

Compose - это инструмент для определения и запуска многоконтейнерных приложений Docker.
```sh
version: '3'
# Устанавливается версия docker-compose
services:
# Определяем блок сервисы, внутри которого устанавливаются названия всех приложений, которые мы хотим запустить под эгидой docker-compose
  app:
  # Название приложения
    build:
    # Блок сборки
      context: .
      # Указываем место, где находится Dockerfile
    ports:
    # Блок порты
      - 8080:80
      # Пробрасываем порты
```

# Практическое задание
Создание приложения Vue.js
```sh
# Глобальная установка Vue CLI (если еще не установлен)
npm install -g @vue/cli

# Создание нового проекта Vue.js
vue create vue-app
```
2. Настройка проксирования через Nginx
```sh
server {
    listen 80;
    server_name localhost;

    location / {
        root /path/to/vue-app/dist;  # Укажите путь к директории dist вашего Vue.js приложения
        index index.html;
        try_files $uri $uri/ /index.html;
    }

    location /api/ {
        proxy_pass http://backend-server;  # Укажите адрес вашего бэкенд-сервера
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }

    # Другие настройки, если необходимо
}
```
3. Сборка и запуск Vue.js приложения
```sh
# Перейдите в директорию вашего Vue.js приложения
cd vue-app

# Установите зависимости
npm install

# Соберите приложение
npm run build
```
4. Сборка и запуск Docker контейнера с Nginx
```sh
# Dockerfile для Nginx
FROM nginx:latest

# Копируем конфигурацию Nginx
COPY nginx.conf /etc/nginx/conf.d/default.conf

# Копируем собранное Vue.js приложение в директорию Nginx
COPY dist /usr/share/nginx/html

# Открываем порт 80
EXPOSE 80

# Команда для запуска Nginx в фоновом режиме
CMD ["nginx", "-g", "daemon off;"]
```
5. Сборка и запуск Docker контейнера
```sh
# Перейдите в корневую директорию проекта
cd /path/to/vue-app

# Сборка Docker контейнера
docker build -t vue-nginx .

# Запуск Docker контейнера
docker run -p 8080:80 vue-nginx
```
